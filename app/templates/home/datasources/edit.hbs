<article class="content item-editor-page">
  <div class="title-block">
    <h3 class="title"> {{t 'datasource.edit.title'}} <strong>{{model.name}}</strong>
      <span class="sparkline bar" data-type="bar"></span>
    </h3>
  </div>
  <form name="item" id="edit-workflow" {{action 'save' on='submit'}}>
    <div class="card card-block">
      <div class="form-group row">
        <label class="col-sm-2 form-control-label text-xs-right"> {{t 'forms.name.label'}}: </label>
        <div class="col-sm-10">
          {{input type="text" class="form-control boxed" value=model.name}}
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 form-control-label text-xs-right"> {{t 'forms.description.label'}}: </label>
        <div class="col-sm-10">
          <div class="form-group">
            {{textarea class="form-control" id="description" rows="5"  maxlength="1600" height="30vh" value=model.description }}
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 form-control-label text-xs-right"> {{t 'forms.format.label'}}: </label>
        <div class="col-sm-2">
          <select class="custom-select datasource-edit" onchange={{action (mut model.format) value="target.value"}}>
            <option></option>
            {{#each formats as |format|}}
              <option value={{format.value}} selected={{eq format.value model.format}}>{{format.name}}</option>
            {{/each}}
          </select>
        </div>
        <label class="col-sm-2 form-control-label text-xs-right"> {{t 'forms.encode.label'}}: </label>
        <div class="col-sm-2">
          <select class="custom-select datasource-edit" onchange={{action (mut model.encoding) value="target.value"}}>
            <option></option>
            {{#each encodings as |encoding|}}
              <option value={{encoding.key}} selected={{eq encoding.key model.encoding}}>{{encoding.value}}</option>
            {{/each}}
          </select>
        </div>
        <label class="col-sm-2 form-control-label text-xs-right same-line"> {{t 'forms.public.label'}}:
          <span class='label checkbox-header'>
            <label class="label-checkbox">
              {{input type="checkbox" class='input-checkbox' checked=model.is_public}}
              <span></span>
            </label>
          </span>
        </label>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 form-control-label text-xs-right"> {{t 'forms.treat_as_missing.label'}}: </label>
        <div class="col-sm-10">
          <div class="form-group">
            {{input type="text" class='form-control boxed' value=model.treat_as_missing}}
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 form-control-label text-xs-right"> {{t 'forms.inferSchema.label'}}:
        </label>
        <div class="col-sm-10">
          <label class="col-sm-12 form-control-label">
            <h5 class='label-append'> {{t 'forms.inferSchema.label-append'}}</h5>
          </label>
          <div class="col-sm-4 flex">
            <label class="form-control-label"> {{t 'forms.inferSchema.delimiter'}}: </label>
            <div class="select2-input-inline">
              {{datasources/select2-input attr=model.attribute_delimiter values=attrDelimiters}}
            </div>
          </div>
          <div class="col-sm-4 flex">
            <label class="form-control-label"> {{t 'forms.inferSchema.quote-char'}}: </label>
            <div class="select2-input-inline">
              {{datasources/select2-input attr=model.text_delimiter values=textDelimiters}}
            </div>
          </div>
          <div class="col-sm-4 flex">
            <label class="form-control-label"> {{t 'forms.inferSchema.header'}}: </label>
            <div class="select2-input-inline same-line">
              <span class='label checkbox-header'>
                <label class="label-checkbox">
                  {{input type="checkbox" class='input-checkbox' checked=model.is_first_line_header}}
                  <span></span>
                </label>
              </span>
            </div>
          </div>
          <a class="col-sm-12 btn btn-primary btn-infer" {{action 'inferSchema'}}> {{t 'forms.inferSchema.infer'}}</a>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 form-control-label text-xs-right"> {{t 'forms.attributes.label'}}:
          <h5 class='label-append'> {{t 'forms.attributes.label-append' resource=(t 'datasource.self')}}</h5>
        </label>
        <div class="col-sm-10">
          <div class="form-group">
            {{datasources/attributes-table attributes=model.attributes}}
          </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-sm-10 col-sm-offset-2">
          <button type="submit" class="btn btn-primary">{{t 'forms.save'}}</button>
          {{#link-to 'home.datasources'}}
            <button class="btn btn-danger">{{t 'forms.cancel'}}</button>
          {{/link-to}}
        </div>
      </div>
    </div>
  </form>
</article>
