---
language: node_js
node_js:
  - "4"

sudo: false

cache:
  directories:
    - node_modules

before_install:
  - npm config set spin false
  - npm install -g bower
  - bower --version
  - npm install phantomjs-prebuilt
  - phantomjs --version

install:
  - npm install
  - bower install

script:
  - npm test

before_deploy:
- |
   $(npm bin)/set-up-ssh --key "$encrypted_3f0d43c1617b_key" \
                         --iv "$encrypted_3f0d43c1617b_iv" \
                         --path-encrypted-key ".travis/github_deploy_key.enc"
deploy:
  provider: script
  script: ember deploy $DEPLOY_ENV
  skip_cleanup: true
  on:
    tags: true
